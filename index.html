<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ink and Obsidian Publication</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind to use Inter font and define custom colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sky-light': '#f0f9ff', // A very light sky blue for subtle accents
                        'sky-accent': '#0ea5e9', // Sky 500 for buttons/links
                        'obsidian': '#1f2937',  // Dark grey for text
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* Pure white background */
            color: #1f2937; /* Obsidian dark text */
        }

        /* --- Custom CSS for Smooth Transitions and Animations --- */
        .page-content {
            opacity: 0;
            transform: translateY(15px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .page-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        .search-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
        }

        .search-container.active {
            max-height: 100px; /* Adjust based on content height */
            padding-top: 1rem;
        }

        /* Navigation Link Hover/Active Styling */
        .nav-link, .mobile-nav-link {
            position: relative;
            padding-bottom: 2px;
            transition: color 0.3s;
        }
        
        /* ADDED: Explicitly set the text color for active navigation links */
        .nav-link.active-nav, 
        .mobile-nav-link.active-nav {
            color: theme('colors.sky-accent'); 
        }

        .nav-link::after, .mobile-nav-link::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 0;
            height: 2px;
            background-color: theme('colors.sky-accent');
            transition: width 0.3s ease-in-out;
        }

        .nav-link:hover::after,
        .nav-link.active-nav::after,
        .mobile-nav-link:hover::after,
        .mobile-nav-link.active-nav::after {
            width: 100%;
        }

        /* Mobile Menu Transitions */
        .mobile-menu-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        .mobile-menu {
            transition: transform 0.3s ease-in-out;
        }

        .book-card, .contact-form-card, .bio-card {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }

        .input-focus:focus {
            border-color: theme('colors.sky-accent');
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.3); /* Custom ring color */
            outline: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header / Navigation Bar -->
    <header class="bg-white sticky top-0 z-10 border-b border-sky-light/80 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo & Title -->
            <a href="#" onclick="navigate('home')" class="flex items-center space-x-3 transition duration-300 transform hover:scale-[1.01]">
                <!-- Logo Source updated to external link -->
                <img src="https://i.postimg.cc/D0wkKkbS/Ink-Obsidian-Publications-main-logo.png"
                     alt="Ink and Obsidian Logo" 
                     class="h-8 w-8 object-contain shadow-md" 
                     onerror="this.onerror=null;this.src='https://placehold.co/32x32/1f2937/ffffff?text=I&O';" 
                     loading="lazy">
                <span class="text-xl font-extrabold text-obsidian whitespace-nowrap">Ink & Obsidian Publication</span>
            </a>

            <!-- Mobile Menu Toggle Button (Hamburger) -->
            <button class="md:hidden p-2 text-obsidian hover:text-sky-accent rounded-lg transition duration-200" onclick="toggleMobileMenu()">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>


            <!-- Navigation Links (Desktop) -->
            <!-- ADDED 'hidden' class to hide on mobile/tablet -->
            <nav class="hidden md:flex space-x-8">
                <a href="#" class="nav-link text-obsidian font-medium" data-page="home" onclick="navigate('home')">Home</a>
                <a href="#" class="nav-link text-obsidian font-medium" data-page="books" onclick="navigate('books')">My Books</a>
                <!-- UPDATED TEXT: The Author -> The Visionary -->
                <a href="#" class="nav-link text-obsidian font-medium" data-page="author" onclick="navigate('author')">The Visionary</a>
                <a href="#" class="nav-link text-obsidian font-medium" data-page="contact" onclick="navigate('contact')">Contact Us</a>
            </nav>

        </div>
    </header>
    
    <!-- Mobile Sidebar Menu Overlay -->
    <div id="mobile-menu-overlay" 
         class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden mobile-menu-overlay opacity-0 md:hidden" 
         onclick="toggleMobileMenu()">
    </div>
    
    <!-- Mobile Sidebar Menu (Off-Canvas) -->
    <div id="mobile-menu" 
         class="fixed top-0 right-0 w-64 h-full bg-white shadow-2xl z-30 transform translate-x-full mobile-menu md:hidden">
        
        <!-- Close Button -->
        <div class="p-4 flex justify-end border-b border-sky-light">
            <button onclick="toggleMobileMenu()" class="text-obsidian hover:text-sky-accent p-2 rounded-full transition duration-200">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Navigation Links -->
        <nav class="flex flex-col p-4 space-y-2">
            <!-- Used handleMobileNav to close the menu upon click -->
            <a href="#" class="mobile-nav-link p-3 rounded-lg text-obsidian hover:bg-sky-light font-medium transition duration-200" data-page="home" onclick="handleMobileNav('home')">Home</a>
            <a href="#" class="mobile-nav-link p-3 rounded-lg text-obsidian hover:bg-sky-light font-medium transition duration-200" data-page="books" onclick="handleMobileNav('books')">My Books</a>
            <!-- UPDATED TEXT: The Author -> The Visionary -->
            <a href="#" class="mobile-nav-link p-3 rounded-lg text-obsidian hover:bg-sky-light font-medium transition duration-200" data-page="author" onclick="handleMobileNav('author')">The Visionary</a>
            <a href="#" class="mobile-nav-link p-3 rounded-lg text-obsidian hover:bg-sky-light font-medium transition duration-200" data-page="contact" onclick="handleMobileNav('contact')">Contact Us</a>
        </nav>
    </div>

    <!-- Main Content Area - PRE-RENDERED HOME PAGE FOR IMMEDIATE VISIBILITY -->
    <main id="content-container" class="page-content active flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        <!-- START: Initial Home Page Content (Pre-rendered) -->
        <div class="bio-card bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-sky-light max-w-4xl mx-auto">
            <!-- Logo added here, centered and larger (h-32 w-32) -->
            <div class="flex justify-center mb-6">
                <img src="https://i.postimg.cc/D0wkKkbS/Ink-Obsidian-Publications-main-logo.png"
                     alt="Ink and Obsidian Logo" 
                     class="h-32 w-32 object-contain" 
                     onerror="this.onerror=null;this.src='https://placehold.co/128x128/1f2937/ffffff?text=I&O';">
            </div>
            
            <h1 class="text-4xl font-black mb-6 text-sky-accent text-center">Welcome to Ink & Obsidian</h1>
            <div class="space-y-6 text-lg text-gray-700 leading-relaxed">
                <p>
                    <strong>Ink & Obsidian Publications</strong> is an independent publishing imprint founded in 2025 with a commitment to storytelling in its purest form. From the eerie and haunting to the heartfelt and inspiring, the imprint embraces every shade of literature — **fantasy, thriller, romance, mystery, science fiction, folklore, and beyond.**
                </p>
                <p>
                    The name “Ink & Obsidian” symbolizes creativity and depth: ink as the timeless medium of expression, and obsidian as a stone of transformation, reflecting the wide spectrum of stories waiting to be told.
                </p>
                <p>
                    As a small but passionate publisher, Ink & Obsidian Publications values originality, imagination, and the courage to explore diverse genres. Its mission is to craft books that captivate, challenge, and resonate with readers worldwide — whether through the chill of a dark tale, the warmth of an emotional journey, or the excitement of an unexpected adventure.
                </p>
            </div>
        </div>
        <!-- END: Initial Home Page Content -->
    </main>

    <!-- Footer -->
    <footer class="bg-sky-light border-t border-sky-light/80 text-center py-6 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <p class="text-sm font-semibold text-obsidian mb-2">
                © 2025 Ink & Obsidian Publications. All rights reserved.
            </p>
            <p class="text-xs text-gray-500 max-w-2xl mx-auto">
                All works published on this site are the original creations of Ink & Obsidian Publications. Unauthorized reproduction is prohibited.
            </p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Core Data & State Management ---

        let currentPage = 'home';
        let currentBookId = null;
        let isSearchVisible = false;
        let isMobileMenuOpen = false; // NEW: Mobile menu state
        
        const bookDescription = "Silent Echoes From Dark World (Vol-1) is a collection of horror and psychological thriller tales woven from traditional folklores and beliefs of Europe, France, India, Japan, and China. Each story dives deep into shadows where myth collides with the darkest truths of the human mind. These are not softened fairy tales. They are brutal, visceral, and unrelenting—echoes of nightmares once whispered around fires, now resurrected for modern readers. This collection is intended strictly for mature readers above sixteen years of age. Those unprepared for psychological violence, disturbing imagery, and the chilling pulse of folklore reborn should turn away. These are not stories to be read lightly; they are doors into silence, and once you enter, the darkness will not release you unchanged";
        const bookGenre = "Historical, Horror, Supernatural, Traditional Folklore, Fantasy"; // ADDED: Shared genre constant


        const booksData = [{
            id: 1,
            title: "Silent Echoes from Dark World (Vol-1) Paperback Version",
            coverUrl: "https://i.postimg.cc/JzZkk9Gy/1.jpg",
            pdfLink: "https://drive.google.com/file/d/1hHp-STRAZrk6bGdTBNE1mw80nIfRKOEJ/view?usp=sharing",
            description: bookDescription,
            placeholder: false,
            pageCount: 81,
            genre: bookGenre // ADDED
        }, {
            id: 2,
            title: "Silent Echoes from Dark World (Vol-1) EPUB/RTF Version",
            coverUrl: "https://i.postimg.cc/SQrbGpZW/1.jpg", 
            pdfLink: "https://drive.google.com/file/d/1FS1oNKghAIbV2f75PYk-0X2SRlb391NI/view?usp=sharing",
            description: bookDescription,
            placeholder: false,
            pageCount: 75,
            genre: bookGenre // ADDED
        }];

        // Populate placeholders up to 24 books (6 per row, 4 rows)
        while (booksData.length < 24) {
            booksData.push({
                id: booksData.length + 1,
                title: `Awaiting New Work (${booksData.length + 1})`,
                coverUrl: "https://placehold.co/150x225/f0f9ff/101010?text=Awaiting+New+Work",
                pdfLink: "#",
                description: "This slot is reserved for a future publication from Ink & Obsidian. Stay tuned!",
                placeholder: true
            });
        }

        // --- Utility Functions ---

        /**
         * Simple SVG for the Search icon (Lucide style)
         */
        function getSearchIcon() {
            return `
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            `;
        }

        /**
         * Simple SVG for the Download/Get It icon (Lucide style)
         */
        function getDownloadIcon() {
            return `
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
            `;
        }

        /**
         * Simple SVG for the Mail/Send icon (Lucide style)
         */
        function getSendIcon() {
            return `
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                    <path d="m22 2-7 20-4-9-9-4 20-7z"></path>
                    <path d="M12 12 19 5"></path>
                </svg>
            `;
        }
        
        /**
         * Toggles the visibility of the mobile menu sidebar and overlay.
         */
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const overlay = document.getElementById('mobile-menu-overlay');
            const body = document.body;

            isMobileMenuOpen = !isMobileMenuOpen;

            if (isMobileMenuOpen) {
                // Show Menu
                overlay.classList.remove('hidden', 'opacity-0');
                overlay.classList.add('opacity-100');
                menu.classList.remove('translate-x-full');
                // Prevent background scrolling
                body.style.overflow = 'hidden';
            } else {
                // Hide Menu
                overlay.classList.remove('opacity-100');
                overlay.classList.add('opacity-0');
                menu.classList.add('translate-x-full');
                // Re-enable background scrolling after transition
                setTimeout(() => {
                    overlay.classList.add('hidden');
                    body.style.overflow = '';
                }, 300); // Match CSS transition duration
            }
        }

        /**
         * Handles mobile navigation, calls navigate(), and closes the menu.
         */
        function handleMobileNav(page) {
            navigate(page);
            // Close the menu after navigation
            if (isMobileMenuOpen) {
                toggleMobileMenu();
            }
        }


        // --- Page Content Rendering Functions ---
        // Retained for subsequent navigation
        function renderHome() {
            return `
                <div class="bio-card bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-sky-light max-w-4xl mx-auto">
                    <!-- Logo added here, centered and larger (h-32 w-32) -->
                    <div class="flex justify-center mb-6">
                        <img src="https://i.postimg.cc/D0wkKkbS/Ink-Obsidian-Publications-main-logo.png"
                             alt="Ink and Obsidian Logo" 
                             class="h-32 w-32 object-contain" 
                             onerror="this.onerror=null;this.src='https://placehold.co/128x128/1f2937/ffffff?text=I&O';">
                    </div>

                    <h1 class="text-4xl font-black mb-6 text-sky-accent text-center">Welcome to Ink & Obsidian</h1>
                    <div class="space-y-6 text-lg text-gray-700 leading-relaxed">
                        <p>
                            <strong>Ink & Obsidian Publications</strong> is an independent publishing imprint founded in 2025 with a commitment to storytelling in its purest form. From the eerie and haunting to the heartfelt and inspiring, the imprint embraces every shade of literature — **fantasy, thriller, romance, mystery, science fiction, folklore, and beyond.**
                        </p>
                        <p>
                            The name “Ink & Obsidian” symbolizes creativity and depth: ink as the timeless medium of expression, and obsidian as a stone of transformation, reflecting the wide spectrum of stories waiting to be told.
                        </p>
                        <p>
                            As a small but passionate publisher, Ink & Obsidian Publications values originality, imagination, and the courage to explore diverse genres. Its mission is to craft books that captivate, challenge, and resonate with readers worldwide — whether through the chill of a dark tale, the warmth of an emotional journey, or the excitement of an unexpected adventure.
                        </p>
                    </div>
                </div>
            `;
        }

        function renderAuthor() {
            return `
                <div class="bio-card bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-sky-light max-w-4xl mx-auto">
                    <h1 class="text-4xl font-black mb-6 text-sky-accent text-center">Hreeshyat Talukdar</h1>
                    <div class="space-y-6 text-lg text-gray-700 leading-relaxed">
                        <p>
                            Hreeshyat is a 19-year-old storyteller from Assam, India, with a profound passion for exploring the limitless realms of imagination. Fascinated by the power of words, he crafts stories across a variety of genres—from chilling horror and psychological thrillers to **fantasy, folklore, and emotional dramas.**
                        </p>
                        <p>
                            Despite his young age, Hreeshyat has shown a remarkable ability to blend cultural traditions, historical references, and human psychology into compelling narratives that grip the reader from the first page. His writing reflects a deep curiosity about the human mind, society, and the myths that shape civilizations, allowing him to weave tales that are both entertaining and thought-provoking.
                        </p>
                        <p class="text-center pt-4 italic text-gray-500">
                            "The deepest truths often lie where the shadows meet the ink."
                        </p>
                    </div>
                </div>
            `;
        }

        function renderContact() {
            return `
                <div class="contact-form-card bg-white p-6 md:p-10 rounded-2xl shadow-xl border border-sky-light max-w-xl mx-auto">
                    <h1 class="text-4xl font-black mb-6 text-sky-accent text-center">Connect With Us</h1>
                    <!-- UPDATED TEXT: Hreeshyat's email -> our official email -->
                    <p class="text-gray-600 mb-6 text-center">We'd love to hear from you. Send your message directly to our official email.</p>

                    <form id="contact-form" onsubmit="handleContactSubmit(event)" class="space-y-5">
                        <div class="space-y-2">
                            <label for="name" class="block text-sm font-medium text-obsidian">Your Name</label>
                            <input type="text" id="name" name="name" required
                                class="w-full p-3 border border-gray-300 rounded-lg input-focus transition duration-200">
                        </div>

                        <div class="space-y-2">
                            <label for="email" class="block text-sm font-medium text-obsidian">Your Email</label>
                            <input type="email" id="email" name="email" required
                                class="w-full p-3 border border-gray-300 rounded-lg input-focus transition duration-200">
                        </div>

                        <div class="space-y-2">
                            <label for="subject" class="block text-sm font-medium text-obsidian">Subject</label>
                            <input type="text" id="subject" name="subject" required
                                class="w-full p-3 border border-gray-300 rounded-lg input-focus transition duration-200">
                        </div>

                        <div class="space-y-2">
                            <label for="message" class="block text-sm font-medium text-obsidian">Message</label>
                            <textarea id="message" name="message" rows="5" required
                                class="w-full p-3 border border-gray-300 rounded-lg input-focus transition duration-200"></textarea>
                        </div>

                        <button type="submit"
                            class="w-full flex items-center justify-center bg-sky-accent text-white py-3 px-4 rounded-lg font-semibold hover:bg-sky-700 transition duration-300 shadow-lg shadow-sky-accent/30 transform hover:scale-[1.01]">
                            ${getSendIcon()}
                            <span class="ml-2">Send</span>
                        </button>
                    </form>

                    <div id="contact-message" class="mt-4 p-3 rounded-lg text-center hidden"></div>
                </div>
            `;
        }

        /**
         * Handles the form submission by constructing a mailto link.
         * @param {Event} event - The form submission event.
         */
        function handleContactSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const name = form.name.value;
            const email = form.email.value;
            const subject = form.subject.value;
            const message = form.message.value;
            const messageDiv = document.getElementById('contact-message');

            // The target Gmail address
            const recipient = 'lalitachoudhuri18@gmail.com';

            // Construct the mailto link
            // NOTE: I'm keeping the body content personalized, but the general text is updated in the UI.
            const bodyContent = `Dear Ink & Obsidian Publications Team,\n\n${message}\n\n---\nSender: ${name} (${email})`;
            const mailtoLink = `mailto:${recipient}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyContent)}`;

            // Open the user's default email client
            window.location.href = mailtoLink;

            // Display a non-alert message
            messageDiv.textContent = 'Your message is being prepared in your email client. Please click "Send" there to complete the action.';
            messageDiv.className = 'mt-4 p-3 bg-sky-light text-sky-accent rounded-lg text-center block';

            // Optionally clear the form after a short delay
            setTimeout(() => {
                form.reset();
                messageDiv.textContent = '';
                messageDiv.className = 'mt-4 p-3 rounded-lg text-center hidden';
            }, 5000);
        }

        function renderBookDetail(bookId) {
            const book = booksData.find(b => b.id === bookId);
            if (!book) return '<p class="text-center text-red-500">Book not found.</p>';

            return `
                <div class="bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-sky-light max-w-5xl mx-auto">
                    <button onclick="navigate('books')" class="flex items-center text-sky-accent hover:text-sky-700 font-semibold mb-6 transition duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="m15 18-6-6 6-6"/></svg>
                        Back to My Books
                    </button>

                    <div class="flex flex-col lg:flex-row gap-10">
                        <!-- Book Cover (Small Size) -->
                        <div class="flex-shrink-0 mx-auto lg:mx-0">
                            <img src="${book.coverUrl}" alt="${book.title} cover" class="w-48 h-auto object-cover rounded-xl shadow-2xl transition duration-500 transform hover:scale-[1.03]" onerror="this.onerror=null;this.src='https://placehold.co/192x288/1f2937/ffffff?text=Silent+Echoes';" loading="lazy">
                        </div>

                        <!-- Book Details -->
                        <div class="flex-grow">
                            <h2 class="text-5xl font-extrabold mb-4 text-obsidian">${book.title}</h2>
                            <p class="text-xl font-medium text-sky-accent mb-6">A Collection of Dark Tales</p>

                            <div class="space-y-6 text-lg text-gray-700 leading-relaxed">
                                <p>${book.description}</p>
                            </div>

                            <div class="mt-4 space-y-1">
                                <!-- Display Total Pages -->
                                ${book.pageCount ? `
                                    <p class="text-lg font-semibold text-obsidian">
                                        Total Pages: <span class="text-sky-accent">${book.pageCount}</span>
                                    </p>
                                ` : ''}

                                <!-- ADDED: Display Genre -->
                                ${book.genre ? `
                                    <p class="text-lg font-semibold text-obsidian">
                                        Genre: <span class="text-sky-accent">${book.genre}</span>
                                    </p>
                                ` : ''}
                            </div>
                            
                            ${!book.placeholder ? `
                                <div class="mt-8">
                                    <a href="${book.pdfLink}" target="_blank" rel="noopener noreferrer"
                                        class="inline-flex items-center bg-sky-accent text-white py-3 px-6 rounded-lg font-bold text-lg hover:bg-sky-700 transition duration-300 shadow-xl shadow-sky-accent/40 transform hover:scale-[1.05]">
                                        ${getDownloadIcon()}
                                        Get It
                                    </a>
                                </div>
                            ` : `<p class="mt-8 p-4 bg-sky-light rounded-lg text-sky-accent font-semibold">Details for this book are coming soon!</p>`}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderBooks(filteredBooks = booksData) {
            const bookCards = filteredBooks.map(book => `
                <div class="book-card bg-white p-4 rounded-xl text-center cursor-pointer border border-sky-light"
                    onclick="navigate('book-detail', ${book.id})">
                    <!-- Book Cover -->
                    <img src="${book.coverUrl}" alt="${book.title} cover" class="w-full h-auto object-cover rounded-lg mx-auto shadow-md"
                        onerror="this.onerror=null;this.src='https://placehold.co/150x225/f0f9ff/101010?text=I&O';" loading="lazy">

                    <!-- Title -->
                    <p class="mt-3 text-sm font-semibold text-obsidian">${book.title}</p>
                </div>
            `).join('');

            return `
                <h1 class="text-4xl font-black mb-4 text-sky-accent text-center">My Books</h1>

                <!-- Search Bar Container -->
                <div class="flex justify-center mb-10">
                    <div class="w-full max-w-xl">
                        <!-- Search Icon Button -->
                        <button onclick="toggleSearch()" id="search-toggle-btn"
                            class="p-3 bg-sky-accent text-white rounded-full mx-auto block hover:bg-sky-700 transition duration-300 transform hover:scale-105 shadow-lg shadow-sky-accent/20">
                            ${getSearchIcon()}
                        </button>

                        <!-- Search Input Area -->
                        <div id="search-bar-container" class="search-container">
                            <input type="text" id="book-search-input" oninput="filterBooks(this.value)"
                                class="w-full p-3 border-2 border-sky-light rounded-xl text-lg input-focus transition duration-300"
                                placeholder="Start typing the book title (e.g., 'Sil')">
                        </div>
                    </div>
                </div>

                <!-- Book Grid (6 books per row) -->
                <div id="book-grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-6">
                    ${bookCards}
                </div>
            `;
        }

        /**
         * Filters the books based on the first 3 letters of the title.
         * Renders the filtered results.
         */
        function filterBooks(query) {
            const lowercaseQuery = query.toLowerCase().trim();
            let results;

            if (lowercaseQuery.length >= 3) {
                results = booksData.filter(book =>
                    book.title.toLowerCase().startsWith(lowercaseQuery)
                );
            } else if (lowercaseQuery.length === 0) {
                results = booksData; // Show all if search is empty
            } else {
                // Show a message or just keep the current list until 3 chars are typed
                results = booksData.filter(book => !book.placeholder); // Only show actual books if not enough chars are typed
                // Or you could show all books: results = booksData;
            }

            const bookGrid = document.getElementById('book-grid');

            const filteredCards = results.map(book => `
                <div class="book-card bg-white p-4 rounded-xl text-center cursor-pointer border border-sky-light"
                    onclick="navigate('book-detail', ${book.id})">
                    <!-- Book Cover -->
                    <img src="${book.coverUrl}" alt="${book.title} cover" class="w-full h-auto object-cover rounded-lg mx-auto shadow-md"
                        onerror="this.onerror=null;this.src='https://placehold.co/150x225/f0f9ff/101010?text=I&O';" loading="lazy">

                    <!-- Title -->
                    <p class="mt-3 text-sm font-semibold text-obsidian">${book.title}</p>
                </div>
            `).join('');

            bookGrid.innerHTML = filteredCards || `<p class="col-span-full text-center text-lg text-gray-500 pt-8">No books found matching the search criteria. Please try again.</p>`;
        }

        /**
         * Toggles the visibility of the search bar input with a smooth transition.
         */
        function toggleSearch() {
            const container = document.getElementById('search-bar-container');
            const input = document.getElementById('book-search-input');
            const button = document.getElementById('search-toggle-btn');

            isSearchVisible = !isSearchVisible;

            if (isSearchVisible) {
                container.classList.add('active');
                setTimeout(() => {
                    input.focus();
                }, 400); // Focus after transition
            } else {
                container.classList.remove('active');
                input.value = '';
                filterBooks(''); // Reset filter when search bar is hidden
                input.blur();
            }
        }


        // --- Navigation and Main Rendering Logic ---

        /**
         * Manages client-side routing and page transitions.
         * @param {string} page - The target page key ('home', 'books', 'author', 'contact', 'book-detail').
         * @param {number|null} [bookId=null] - Optional ID for book detail view.
         */
        function navigate(page, bookId = null) {
            const container = document.getElementById('content-container');
            const navLinksDesktop = document.querySelectorAll('.nav-link');
            const navLinksMobile = document.querySelectorAll('.mobile-nav-link');
            const allNavLinks = [...navLinksDesktop, ...navLinksMobile];

            // 1. Start Exit Animation
            container.classList.remove('active');

            // 2. Update State
            currentPage = page;
            currentBookId = bookId;

            // 3. Wait for Exit Animation to complete before rendering new content
            setTimeout(() => {
                let htmlContent = '';

                switch (page) {
                    case 'home':
                        htmlContent = renderHome();
                        break;
                    case 'author':
                        htmlContent = renderAuthor();
                        break;
                    case 'contact':
                        htmlContent = renderContact();
                        break;
                    case 'books':
                        htmlContent = renderBooks();
                        // Reset search visibility when moving to books page
                        isSearchVisible = false;
                        break;
                    case 'book-detail':
                        htmlContent = renderBookDetail(bookId);
                        break;
                    default:
                        htmlContent = renderHome(); // Default to home
                }

                container.innerHTML = htmlContent;

                // 4. Start Entry Animation
                container.classList.add('active');

                // 5. Update Navigation Styling
                allNavLinks.forEach(link => {
                    // Determine the active link key (for book-detail, the active link is 'books')
                    const activeKey = (page === 'book-detail' ? 'books' : page);

                    // Check both desktop and mobile links
                    if (link.getAttribute('data-page') === activeKey) {
                        link.classList.add('active-nav');
                    } else {
                        link.classList.remove('active-nav');
                    }
                });

                // Special handling for My Books search bar initialization
                if (page === 'books') {
                    const searchContainer = document.getElementById('search-bar-container');
                    // Ensure search bar is hidden on initial load of the books page
                    if (searchContainer) {
                        searchContainer.classList.remove('active');
                    }
                }

                window.scrollTo({ top: 0, behavior: 'smooth' });

            }, 400); // Transition time (0.4s)
        }

        // Initialize the page on load
        window.onload = () => {
            // The 'home' content is now pre-rendered in the HTML.
            // We just ensure the navigation bar reflects 'home' as active.
            const navLinksDesktop = document.querySelectorAll('.nav-link');
            const navLinksMobile = document.querySelectorAll('.mobile-nav-link');
            const allNavLinks = [...navLinksDesktop, ...navLinksMobile];
            
            allNavLinks.forEach(link => {
                if (link.getAttribute('data-page') === 'home') {
                    link.classList.add('active-nav');
                } else {
                    link.classList.remove('active-nav');
                }
            });
            currentPage = 'home'; // Set initial state
        };

    </script>
</body>
</html>

